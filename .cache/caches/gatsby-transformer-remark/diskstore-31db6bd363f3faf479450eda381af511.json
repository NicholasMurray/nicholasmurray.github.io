{"expireTime":9007200801288851000,"key":"transformer-remark-markdown-ast-5cc1751ce5e6c057ce49bf699933b9a1-gatsby-remark-imagesgatsby-remark-responsive-iframegatsby-remark-external-linksgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"image","title":"How to debug phantomjs tests in a browser","url":"/images/phantomjs.png","alt":"alt text ","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":80,"offset":81},"indent":[]}}],"position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":80,"offset":81},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"What can you do if your karma unit tests are failing or throwing an error?","position":{"start":{"line":5,"column":3,"offset":85},"end":{"line":5,"column":77,"offset":159},"indent":[]}}],"position":{"start":{"line":5,"column":1,"offset":83},"end":{"line":5,"column":77,"offset":159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Coding unit tests creates a similar set of problems as programming the code you wish to test.","position":{"start":{"line":7,"column":1,"offset":161},"end":{"line":7,"column":94,"offset":254},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":161},"end":{"line":7,"column":94,"offset":254},"indent":[]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"They can throw an error","position":{"start":{"line":9,"column":4,"offset":259},"end":{"line":9,"column":27,"offset":282},"indent":[]}}],"position":{"start":{"line":9,"column":4,"offset":259},"end":{"line":9,"column":27,"offset":282},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":256},"end":{"line":9,"column":27,"offset":282},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"They can throw an exception","position":{"start":{"line":10,"column":4,"offset":286},"end":{"line":10,"column":31,"offset":313},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":286},"end":{"line":10,"column":31,"offset":313},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":283},"end":{"line":10,"column":31,"offset":313},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Unexpectantly failing a test","position":{"start":{"line":11,"column":4,"offset":317},"end":{"line":11,"column":32,"offset":345},"indent":[]}}],"position":{"start":{"line":11,"column":4,"offset":317},"end":{"line":11,"column":32,"offset":345},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":314},"end":{"line":11,"column":32,"offset":345},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Just plain failing","position":{"start":{"line":12,"column":4,"offset":349},"end":{"line":12,"column":22,"offset":367},"indent":[]}}],"position":{"start":{"line":12,"column":4,"offset":349},"end":{"line":12,"column":22,"offset":367},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":346},"end":{"line":12,"column":22,"offset":367},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":256},"end":{"line":12,"column":22,"offset":367},"indent":[1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Running karma with phantomjs","position":{"start":{"line":14,"column":5,"offset":373},"end":{"line":14,"column":33,"offset":401},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":369},"end":{"line":14,"column":33,"offset":401},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When running your javascript unit tests having them running as fast as possible is very desirable and phantomjs, the headless webkit\nbrowser, allows your tests to be run at speed with the output being returned to your console.","position":{"start":{"line":16,"column":1,"offset":403},"end":{"line":17,"column":94,"offset":629},"indent":[1]}}],"position":{"start":{"line":16,"column":1,"offset":403},"end":{"line":17,"column":94,"offset":629},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"To use phantomjs as your testing browser in karma your need to install the node package karma-phantomjs-launcher and then reference it \nin your karma config.","position":{"start":{"line":19,"column":1,"offset":631},"end":{"line":20,"column":22,"offset":788},"indent":[1]}}],"position":{"start":{"line":19,"column":1,"offset":631},"end":{"line":20,"column":22,"offset":788},"indent":[1]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    autoWatch: true,\n    browsers:  [&#39;PhantomJS&#39;],\n    plugins: [\n      &#39;karma-phantomjs-launcher&#39;,\n      &#39;karma-jasmine&#39;,\n      &#39;karma-webpack&#39;\n    ],</code></pre></div>","position":{"start":{"line":22,"column":1,"offset":790},"end":{"line":30,"column":4,"offset":949},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"But if it is a headless browser running in a console how do debug it?","position":{"start":{"line":33,"column":5,"offset":956},"end":{"line":33,"column":74,"offset":1025},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":952},"end":{"line":33,"column":74,"offset":1025},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Phantomjs is a headless browser that runs in your console which, is great when your tests are all passing.","position":{"start":{"line":35,"column":1,"offset":1027},"end":{"line":35,"column":107,"offset":1133},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1027},"end":{"line":35,"column":107,"offset":1133},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PhantomJS 1.9.8 (Mac OS X 0.0.0): Executed 18 of 18 SUCCESS (0.169 secs / 0.165 secs)</code></pre></div>","position":{"start":{"line":37,"column":1,"offset":1135},"end":{"line":39,"column":4,"offset":1228},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"But if your output looks like below then you probably wish you could open the testing browsers Developer Tools \nand debug the test manually.","position":{"start":{"line":41,"column":1,"offset":1230},"end":{"line":42,"column":29,"offset":1370},"indent":[1]}}],"position":{"start":{"line":41,"column":1,"offset":1230},"end":{"line":42,"column":29,"offset":1370},"indent":[1]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PhantomJS 1.9.8 (Mac OS X 0.0.0): Executed 18 of 18 (1 FAILED) (0.163 secs / 0.161 secs)\nPhantomJS 1.9.8 (Mac OS X 0.0.0) dropboxController should import the file, refresh and autosave the document FAILED\n        Expected spy $emit to have been called with [ &#39;autosave&#39; ] but it was never called.\n        Expected spy $emit to have been called with [ &#39;document.refresh&#39; ] but it was never called.</code></pre></div>","position":{"start":{"line":44,"column":1,"offset":1372},"end":{"line":49,"column":4,"offset":1776},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"You can with karma","position":{"start":{"line":51,"column":5,"offset":1782},"end":{"line":51,"column":23,"offset":1800},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1778},"end":{"line":51,"column":23,"offset":1800},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Even though, using karma as your test runner and phantomjs as the headless browser, you can still step through your \ncode in another browsers Developer Tools.","position":{"start":{"line":53,"column":1,"offset":1802},"end":{"line":54,"column":42,"offset":1960},"indent":[1]}}],"position":{"start":{"line":53,"column":1,"offset":1802},"end":{"line":54,"column":42,"offset":1960},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"In your karma config you specify the port that karmaâ€™s webserver will be listening on.","position":{"start":{"line":56,"column":1,"offset":1962},"end":{"line":56,"column":87,"offset":2048},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":1962},"end":{"line":56,"column":87,"offset":2048},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">port:      9876,</code></pre></div>","position":{"start":{"line":58,"column":1,"offset":2050},"end":{"line":60,"column":4,"offset":2074},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can combine your local host address, the port number and the karma debug page in your browser of choice and then step through the code.","position":{"start":{"line":62,"column":1,"offset":2076},"end":{"line":62,"column":140,"offset":2215},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2076},"end":{"line":62,"column":140,"offset":2215},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://127.0.0.1:9876/debug.html</code></pre></div>","position":{"start":{"line":64,"column":1,"offset":2217},"end":{"line":66,"column":4,"offset":2257},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"image","title":"Debugging a karam test","url":"/images/karma-debug.png","alt":"alt text ","position":{"start":{"line":68,"column":1,"offset":2259},"end":{"line":68,"column":63,"offset":2321},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":2259},"end":{"line":68,"column":63,"offset":2321},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you want to start debugging at a particular point you can add a debugger statement to your tests to break at that line.","position":{"start":{"line":70,"column":1,"offset":2323},"end":{"line":70,"column":123,"offset":2445},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2323},"end":{"line":70,"column":123,"offset":2445},"indent":[]}},{"type":"html","lang":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">debugger;</code></pre></div>","position":{"start":{"line":72,"column":1,"offset":2447},"end":{"line":74,"column":4,"offset":2464},"indent":[1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":75,"column":1,"offset":2465}}}}