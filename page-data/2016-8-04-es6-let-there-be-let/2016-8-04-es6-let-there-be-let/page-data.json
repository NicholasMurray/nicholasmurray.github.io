{"componentChunkName":"component---src-templates-blog-post-js","path":"/2016-8-04-es6-let-there-be-let/2016-8-04-es6-let-there-be-let/","result":{"data":{"site":{"siteMetadata":{"title":"Its my Code Blog"}},"markdownRemark":{"id":"09c71ccd-1f1a-5855-85e8-ad07014699ca","excerpt":"In the beginning there was var And var was a little bit tricky to understand. So, along came es6 with the new \nshiny let. Block level scoping In javascript theâ€¦","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/244d5d755b59a2404b19c2e8cb891256/73963/let-there-be-light.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHnvPLQy8j/xAAaEAACAgMAAAAAAAAAAAAAAAAAAgERAxAh/9oACAEBAAEFAoYZ4LsjS4ef/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BV//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AUf/xAAYEAEAAwEAAAAAAAAAAAAAAAAAARAhMv/aAAgBAQAGPwJjah0//8QAGRABAQEBAQEAAAAAAAAAAAAAAQARMaHR/9oACAEBAAE/IfGYuEHhCOqXbrNvlf/aAAwDAQACAAMAAAAQgD//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPxBL/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QW//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQWHw/9oACAEBAAE/EGTKOzRn0mUMLHyESW8OZj1FUdbiG0K+9n//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text \"\n        title=\"ES6 Let there be let\"\n        src=\"/static/244d5d755b59a2404b19c2e8cb891256/88218/let-there-be-light.jpg\"\n        srcset=\"/static/244d5d755b59a2404b19c2e8cb891256/7237a/let-there-be-light.jpg 148w,\n/static/244d5d755b59a2404b19c2e8cb891256/0cfdf/let-there-be-light.jpg 295w,\n/static/244d5d755b59a2404b19c2e8cb891256/88218/let-there-be-light.jpg 590w,\n/static/244d5d755b59a2404b19c2e8cb891256/73963/let-there-be-light.jpg 600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>In the beginning there was var</h1>\n<p>And <strong><em>var</em></strong> was a little bit tricky to understand. So, along came es6 with the new\nshiny <strong><em>let</em></strong>.</p>\n<h2>Block level scoping</h2>\n<p>In javascript the setting of a variable can be the cause of bugs due to way javascript allows\nthe assigning of values. For example, in the code below you would think that declaring and\nassigning a value to a variable inside a block of code would isolate it from the rest of the\ncode. But javascript does not have block level scoping. So, in the code below the variable\n<strong><em>messageInBottle</em></strong> takes its value from the second assignment and not the first.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var messageInBottle = &#39;Help me!&#39;;\n{\n  var messageInBottle = &#39;Would you like a pen pal?&#39;; \n}\nconsole.log(messageInBottle);\n\n// output: Would you like a pen pal?</code></pre></div>\n<p>Javascript has function level scoping which encapsulates <strong><em>var</em></strong> declarations and assignments\nand therefore in the code below the first assignment of <strong><em>messageInBottle</em></strong> is unaffected by the\nsecond assignment.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var messageInBottle = &#39;Help me!&#39;;\n\nfunction bottle() {\n  var messageInBottle = &#39;Would you like a pen pal?&#39;; \n}\n\nconsole.log(messageInBottle);\n\n// output: Help me!</code></pre></div>\n<p>With es6 the introduction of the <strong><em>let</em></strong> keyword introduces block level variable scoping. This\nallows the declaration and assignment of variables that have block level scope. Now we can\nsee that the first <strong><em>messageInBottle</em></strong> <strong><em>let</em></strong> variable retains its value as the second\n<strong><em>messageInBottle</em></strong> <strong><em>let</em></strong> variable is restricted to the scope of its code block. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">let messageInBottle = &#39;Help me!&#39;;\n{\n  let messageInBottle = &#39;Would you like a pen pal?&#39;; \n}\nconsole.log(messageInBottle);\n\n// output: Help me!</code></pre></div>\n<h2>Hoisted by your own petard</h2>\n<p>In the code below we would expect the output to be the range of numbers 0-9 squared but\nthe output is in fact the number 10 repeated 10 times. This occurs due to the reference\nof <strong><em>n</em></strong> pointing to the value of n in the loop which has exited when it incremented to\nthe number 10. This variable hoisting moves the declaration of the variable <strong><em>n</em></strong> out\nof the loop and instead to the top of the function scope.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var squares = [];\n\nfor (var n = 0; n &lt; 10; n ++) {\n   squares.push(function() {\n     console.log(n * n);\n   });\n}\n\nsquares.forEach(function(s) { \n  s();\n});\n\n// output:\n// 10\n// 10\n// 10\n// 10\n// 10\n// 10\n// 10\n// 10\n// 10\n// 10</code></pre></div>\n<p>This can be solved by using a closure which are nested functions that retain a reference to\nthe enviroment in which they were created. The closure retains the value of n that it was\npassed during its creation. We now see the expected output of the range 0-9 squared.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var squares = [];\n\nfor (var n = 0; n &lt; 10; n ++) {\n   squares.push(function(i) {\n     console.log(i * i);\n   }(n));\n}\n\nsquares.forEach(function(s) {\n});\n\n// output:\n// 0\n// 1\n// 4\n// 9\n// 16\n// 25\n// 36\n// 49\n// 64\n// 81</code></pre></div>\n<p>The newly introduced <strong><em>let</em></strong> keyword can help us gain the expected output by its ability\nto create a new instance of <strong><em>n</em></strong> each time the code goes through the for loop.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">var squares = [];\n\nfor (let n = 0; n &lt; 10; n ++) {\n   squares.push(function() {\n     console.log(n * n);\n   });\n}\n\nsquares.forEach(function(s) {\n  s();\n});\n\n// output:\n// 0\n// 1\n// 4\n// 9\n// 16\n// 25\n// 36\n// 49\n// 64\n// 81</code></pre></div>\n<p>Photo Credit: <a href=\"https://unsplash.com/@celestekorol\">Celeste Korol</a> via <a href=\"https://unsplash.com/\">Unsplash</a></p>","frontmatter":{"title":"ES6 Let there be let","date":"August 04, 2016","description":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2016-8-04-es6-let-there-be-let/2016-8-04-es6-let-there-be-let/","previous":{"fields":{"slug":"/2016-7-14-es6-string-template-literals/2016-7-14-es6-string-template-literals/"},"frontmatter":{"title":"ES6 String Template Literals"}},"next":{"fields":{"slug":"/2017-3-18-react-random-squares-avatar/2017-3-18-react-random-squares-avatar/"},"frontmatter":{"title":"React Random Squares Avatar"}}}}}