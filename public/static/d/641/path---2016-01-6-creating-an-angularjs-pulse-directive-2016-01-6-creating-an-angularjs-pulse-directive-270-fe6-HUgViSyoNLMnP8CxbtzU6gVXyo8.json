{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"c1b58e13-6ea4-5829-a576-bd1957136706","excerpt":"Using animations to alert the user to value changes When highlighting to the user a change of a value on a page with a noisy layout you are faced with two…","html":"<p><img src=\"/images/pulse.jpg\" alt=\"alt text \" title=\"Creating an AngularJS pulse directive\"></p>\n<h2>Using animations to alert the user to value changes</h2>\n<p>When highlighting to the user a change of a value on a page with a noisy layout you are faced with two possibilities,\neither use a colour to highlight the change or add an animation to emphasize the transition\nbetween the initial value and the new value.</p>\n<p>Using a colour can add to visual noise on page if the change in value is not crucial to the overall user experience, you may\ncourse want a value highlighted in red if a limit has been reached. If you want draw attention value changing but not the\nsignificance of the value then an animation can be effective.</p>\n<p>One of the animations types we will explore is a CSS pulse animation.</p>\n<h2>Pulse CSS with keyframes</h2>\n<p>The pulse animation will take the form of 3d scaling up the chosen element by 25% at the halfway point in the animation and\nthen gradually transforming the element back to its initial state at the end of the animation. CSS3 us allows to use keyframes\nto specify the points in time at which we wish our effects to have taken place</p>\n<p>Keyframes are steps in your animation that allow you define the stages of the transformation being specified,\ncreating a smoother animation.</p>\n<p>{% highlight html %}\n.pulse {\nanimation: pulse 1s infinite;\nanimation-duration: 1s;\nanimation-play-state: running;\nanimation-iteration-count: 1;\n}</p>\n<p>@keyframes pulse {\n0% {\ntransform: scale3d(1, 1, 1);\n}\n50% {\ntransform: scale3d(1.25, 1.25, 1.25);\n}\n100% {\ntransform: scale3d(1, 1, 1);\n}\n}\n{% endhighlight %}</p>\n<h2>ngAnimate</h2>\n<p>In this AngularJS app we will have a dependency on <a href=\"https://docs.angularjs.org/api/ngAnimate\" target=\"_blank\">ngAnimate</a>\nso lets inject it into our app via dependency injection.</p>\n<p>{% highlight html %}\nvar app = angular.module(“app”, [“ngAnimate”]);\n{% endhighlight %}</p>\n<h2>Control the value in the controller</h2>\n<p>As usual in an AngularJS app the value that we will be manipulating should have any operations located in the controller. So the\ncurrentVote variable will be initialised, incremented and decremented from our controller. </p>\n<p>In this implementation we will be using the ‘controller as’ syntax to identify methods with the controller scope indicated\nwith the vm (view model).</p>\n<p>{% highlight html %}\n(function() {\nangular.module(“app”).controller(“AppCtrl”, function() {\nvar vm = this;</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  vm.currentVote = 0;\n\n  vm.plusOne = function() {\n    vm.currentVote = vm.currentVote + 1;\n  }\n\n  vm.minusOne = function() {\n    vm.currentVote = vm.currentVote - 1;\n  } \n  \n  return vm;</code></pre></div>\n<p>  });\n})();\n{% endhighlight %}</p>\n<h2>To use a directive or not use a directive</h2>\n<p>We could also invoke the animation from our <em>controller</em>, first by injecting $animation into the anonymous function and then\nby adding code to the plusOne and minusOne functions like below.</p>\n<h4>Code Smell</h4>\n<p>In AngularJS this would give our code a ‘code smell’ as searching for elements by id or class is an anti-pattern as\ndirectives have been supplied to deal with this scenario. The <em>controller</em> should be controlling the value and the <em>directive</em>\ncontrolling the element to animate.</p>\n<p>{% highlight html %}\n(function() {\nangular.module(“app”).controller(“AppCtrl”, function($animate) {\nvar vm = this;\n<br>\nvar elementToPulse = angular.element(document.getElementById(‘badge’));</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  vm.currentVote = 0;\n\n  vm.plusOne = function() {\n    vm.currentVote = vm.currentVote + 1;\n    $animate.addClass(elementToPulse, &quot;pulse&quot;);\n  }\n\n  vm.minusOne = function() {\n    vm.currentVote = vm.currentVote - 1;\n    $animate.addClass(elementToPulse, &quot;pulse&quot;);\n  } \n  \n  return vm;</code></pre></div>\n<p>  });\n})();</p>\n<p>{% endhighlight %}</p>\n<h2>Watch the variable from our directive</h2>\n<p>We will create a directive called pulseOnChange that will watch for value changes in an element. Injecting $animate and\n$timeout provide the functionality to add the pulse class to the element on change and then to remove the pulse class after\n1 second in this case as we have specified our animation to last 1 second.</p>\n<p>{% highlight html %}\n(function() {\nangular.module(“app”).directive(“pulseOnChange”, function($animate, $timeout) {\nreturn function(scope, element, attrs) {\nscope.$watch(attrs.pulseOnChange, function() {\n$animate.addClass(element, “pulse”);\n$timeout(function() {\n$animate.removeClass(element, “pulse”);\n}, 1000);\n});\n};\n});\n})();\n{% endhighlight %}</p>\n<h2>Lets create the HTML</h2>\n<p>There are fours part to our HTML</p>\n<ul>\n<li>\n<p>declare our app and controller on the body and use the controller as snytax</p>\n</li>\n<li>\n<p>a button to control the increment</p>\n</li>\n<li>\n<p>a directive applied to the element containing the value</p>\n</li>\n<li>\n<p>a button to decrement the value</p>\n</li>\n</ul>\n<p>We will use <a href=\"http://getbootstrap.com/\" target=\"_blank\">bootstrap 3</a> to layout our page, add\nstyles and icons to our app.</p>\n<p>{% highlight html %}</p>\n<body ng-app=\"app\" ng-controller=\"AppCtrl as vm\">\n  \n  <div class=\"jumbotron vertical-center\">\n    <div class=\"container text-center\">\n      <button class=\"btn btn-success glyphicon glyphicon-thumbs-up\" ng-click=\"vm.plusOne()\"></button>\n      <div class=\"badge-container vertical-center\">\n        <span class=\"badge\" pulse-on-change=\"vm.currentVote\">{{ vm.currentVote}}</span>\n      </div>\n      <button class=\"btn btn-success glyphicon glyphicon-thumbs-down\" ng-click=\"vm.minusOne()\"></button>\n    </div>\n  </div>\n  \n</body>\n{% endhighlight %}\n<h2>Lets view the end product</h2>\n<p>As we can see all the moving parts come together to highlight the change in value to the user without adding any additional\nvisual noise to the page.</p>\n<p data-height=\"268\" data-theme-id=\"0\" data-slug-hash=\"OMWBWj\" data-default-tab=\"result\" data-user=\"NicholasMurray\" class='codepen'>See the Pen <a href='http://codepen.io/NicholasMurray/pen/OMWBWj/'>AngularJS Pulse on change Directive</a> by Nicholas Murray (<a href='http://codepen.io/NicholasMurray'>@NicholasMurray</a>) on <a href='http://codepen.io'>CodePen</a>.</p>\n<script async src=\"//assets.codepen.io/assets/embed/ei.js\"></script>","frontmatter":{"title":"Creating an AngularJS pulse directive","date":null}}},"pageContext":{"slug":"/2016-01-6-creating-an-angularjs-pulse-directive/2016-01-6-creating-an-angularjs-pulse-directive/","previous":{"fields":{"slug":"/2016-7-14-es6-string-template-literals/2016-7-14-es6-string-template-literals/"},"frontmatter":{"title":"ES6 String Template Literals"}},"next":{"fields":{"slug":"/2016-5-29-the-apple-watch-at-a-glance/2016-5-29-the-apple-watch-at-a-glance/"},"frontmatter":{"title":"The Apple Watch at a Glance"}}}}