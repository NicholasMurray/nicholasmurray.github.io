{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"ea013393-5f74-5b4d-96fb-47d798a84802","excerpt":"Angular2  - Components In Angular2 Components are the way we add behaviour to new DOM elements that we add to an application whereas \nDirectives add behaviourâ€¦","html":"<p><img src=\"/images/High_voltage_test_set.jpg\" alt=\"alt text \" title=\"Angular2 - unit Testing a component\"></p>\n<h1>Angular2  - Components</h1>\n<p>In Angular2 Components are the way we add behaviour to new DOM elements that we add to an application whereas\nDirectives add behaviour to existing elements. Components allow us to break down an application into smaller\npieces of code that can encapsulate behaviour and functionality. This allows us to test the component\nseparately from the rest of the application. The component that we will unit test renders a supplied club\nmembers fullname in a span tag.</p>\n<h2>Club Member Model</h2>\n<p>The club member component requires a club member to be supplied, so we will create a club member model\nthat we can use to pass a club member as input to the component. The club member model needs two properties -\na firstname and a surname - and we will also need to return function to return a fullname.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export class ClubMemberModel {\n\n    constructor(\n        public firstname: string = &#39;&#39;,\n        public surname: string = &#39;&#39;\n    ) {};\n\n    fullname() {\n        return (this.firstname + &#39; &#39; + this.surname);\n    }\n}</code></pre></div>\n<h2>Club Member Model Unit Test</h2>\n<p>The club member renderer component is going to have an Input property that is in the form of a club member\nmodel. So as the club member renderer component relies on the club member model we should unit test our\nclub member model first to ensure that it works as expected. </p>\n<p>Firstly we need to import <em>describe</em>, <em>it</em> and <em>expect</em> from <em>angular2/testing</em> and\n<em>ClubMemberModel</em> from <em>club-member-model.ts</em>. Then we can test that the club member model returns firstname,\nsurname and fullname in line with our expectations.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {\n  describe, \n  it, \n  expect\n} from &#39;angular2/testing&#39;;\n\nimport {ClubMemberModel} from &#39;./club-member-model&#39;;\n\ndescribe(&#39;ClubMemberModel&#39;, () =&gt; {\n\n  it(&#39;should return the correct properties&#39;, () =&gt; {\n\n      var newClubMember = new ClubMemberModel();\n      newClubMember.firstname = &#39;John&#39;;\n      newClubMember.surname = &#39;Velo&#39;;\n\n      expect(newClubMember.firstname).toBe(&#39;John&#39;);\n      expect(newClubMember.surname).toBe(&#39;Velo&#39;);\n      expect(newClubMember.fullname()).toBe(&#39;John Velo&#39;);\n  });\n\n});</code></pre></div>\n<h2>Club Member Renderer</h2>\n<p>The club member renderer component comprises of a <em>selector</em>, a <em>template</em> and has a databound <em>Input</em> property\nof clubmember. The selector parameter is the replacement for the naming conventions that were previously\nin directives and works in the same fashion as a querySelector that searches for an element called\nclub-member-renderer upon which it will instatiate itself. The template parameter is an inline template\nthat contains span tags that wrap an angular expression which evaluates clubmember.fullname(). Finally\nthere is a a data bound input property of clubmember which will be passed to template for evaluation.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {Component, Input} from &#39;angular2/core&#39;;\n\n@Component({\n    selector: &#39;club-member-renderer&#39;,\n    template:   `&lt;span&gt;{{ clubmember.fullname() }}&lt;/span&gt;`\n})\nexport class ClubMemberRenderer {\n    @Input() clubmember;\n}</code></pre></div>\n<h2>Club Member Renderer Unit Test</h2>\n<p>A component requires more setup than our previous model test. Intially we will have to import <em>describe</em>,\n<em>it</em>, <em>expect</em>, <em>inject</em>, <em>beforeEach</em>, <em>beforeEachProviders</em> and <em>TestComponentBuilder</em> from\n<em>angular2/testing</em>. Then next import <em>ClubMemberRenderer</em> from <em>club-member-renderer.ts</em> and\n<em>ClubMemberModel</em> from <em>club-member-model</em>.</p>\n<p>Succeeding the imports is some setup for the test using the <em>beforeEachProviders</em>  and <em>inject</em> functions\nto bootstrap the test, instantiating the component under test. Then in the test we can create asynchronously\nthe ClubMemberRenderer component verifying that the span element it creates, will render the fullname of a\nclub member, if passed an instance of a ClubMemberModel containing a firstname and surname.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {\n    describe, \n    it, \n    expect, \n    inject,\n    beforeEach, \n    beforeEachProviders, \n    TestComponentBuilder\n} from &#39;angular2/testing&#39;;\n\nimport {ClubMemberRenderer} from &quot;./club-member-renderer&quot;;\nimport {ClubMemberModel} from &quot;./club-member-model&quot;;\n    \ndescribe(&#39;ClubMemberRenderer: component&#39;, () =&gt; {\n  let tcb;\n  \n  //setup\n  beforeEachProviders(() =&gt; [\n      TestComponentBuilder,\n      ClubMemberRenderer\n  ]);\n  \n  beforeEach(inject([TestComponentBuilder], _tcb =&gt; { \n      tcb = _tcb\n  }));\n  \n  //specs\n  it(&#39;should render club member name&#39;, done =&gt; {\n      tcb.createAsync(ClubMemberRenderer).then(fixture =&gt; {\n          let clubMemberFixture = fixture.componentInstance, \n          element = fixture.nativeElement;\n          \n          var newClubMember = new ClubMemberModel();\n          newClubMember.firstname = &#39;John&#39;;\n          newClubMember.surname = &#39;Velo&#39;;\n              \n          clubMemberFixture.clubmember = newClubMember;\n          \n          fixture.detectChanges(); //trigger change detection\n          expect(element.querySelector(&#39;span&#39;).innerText).toBe(&#39;John Velo&#39;);\n          done();\n      })\n      .catch(e =&gt; done.fail(e));\n  });\n});</code></pre></div>\n<h2>Club Member Renderer in action</h2>\n<p>So how is the club member renderer used in the context of an Angular2 app? First we create an app component\nthat imports <em>Component</em> and <em>Input</em> from <em>angular2/core</em>, <em>ClubMemberModel</em> from <em>club-member-model</em> and\nthen <em>ClubMemberRenderer</em> from <em>club-member-renderer</em>. Next we declare the selector parameter of <em>app</em>,\na template parameter which contains a <em><club-member-renderer></em> element and then a directive reference to\nthe <em>ClubMemberRenderer</em> component. The App class contains a variable <em>clubMember</em> declared as type\n<em>ClubMemberModel</em> then in the constructor <em>clubMember</em> is set to a new instance of <em>ClubMemberModel</em>\ncomprising of a firstname and surname.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import {Component, Input} from &#39;angular2/core&#39;;\nimport {ClubMemberModel} from &#39;./club-member-model&#39;;\nimport {ClubMemberRenderer} from &#39;./club-member-renderer&#39;;\n\n@Component({\n\tselector: &#39;app&#39;,\n\ttemplate: `&lt;div&gt;\n\t            &lt;club-member-renderer [clubmember]=&quot;clubMember&quot;&gt;&lt;/club-member-renderer&gt;\n\t           &lt;/div&gt;`,\n\tdirectives: [ClubMemberRenderer]\n})\nexport class App {\n  clubMember: ClubMemberModel;\n  \n  constructor() {\n    \n    this.clubMember = new ClubMemberModel(&quot;John&quot;, &quot;Velo&quot;);\n  }\n}</code></pre></div>\n<h2>Plunker Links</h2>\n<p>The code for the <em>ClubMemberRenderer</em> unit tests are available in this <a href=\"https://plnkr.co/XcBugFIxCpS7ARyEHBXK\" target=\"_blank\">plnkr</a>\nand the <em>ClubMemberRenderer</em> in action code is available in this <a href=\"https://plnkr.co/QYMkClDh6t7nYPfbcaZO\" target=\"_blank\">plnkr</a>. </p>","frontmatter":{"title":"Angular2 - Unit Testing a component","date":null}}},"pageContext":{"slug":"/2016-4-14-angular2-unit-testing-a-component/2016-4-14-angular2-unit-testing-a-component/","previous":{"fields":{"slug":"/2016-5-9-windows-deleting-node-modules/2016-5-9-windows-deleting-node-modules/"},"frontmatter":{"title":"Deleting a node_modules folder on windows without downloading anything"}},"next":{"fields":{"slug":"/2016-3-10-typescript-spread-operator/2016-3-10-typescript-spread-operator/"},"frontmatter":{"title":"Typescript Spread Operator"}}}}