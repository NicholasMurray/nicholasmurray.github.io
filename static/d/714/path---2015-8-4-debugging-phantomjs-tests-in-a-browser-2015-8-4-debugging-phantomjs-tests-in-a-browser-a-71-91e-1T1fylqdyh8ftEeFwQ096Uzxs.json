{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"010a0ea0-ed4c-552b-a32d-8654e7fb7e3b","excerpt":"What can you do if your karma unit tests are failing or throwing an error? Coding unit tests creates a similar set of problems as programming the code you wishâ€¦","html":"<p><img src=\"/images/phantomjs.png\" alt=\"alt text \" title=\"How to debug phantomjs tests in a browser\"></p>\n<h1>What can you do if your karma unit tests are failing or throwing an error?</h1>\n<p>Coding unit tests creates a similar set of problems as programming the code you wish to test.</p>\n<ol>\n<li>They can throw an error</li>\n<li>They can throw an exception</li>\n<li>Unexpectantly failing a test</li>\n<li>Just plain failing</li>\n</ol>\n<h3>Running karma with phantomjs</h3>\n<p>When running your javascript unit tests having them running as fast as possible is very desirable and phantomjs, the headless webkit\nbrowser, allows your tests to be run at speed with the output being returned to your console.</p>\n<p>To use phantomjs as your testing browser in karma your need to install the node package karma-phantomjs-launcher and then reference it\nin your karma config.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    autoWatch: true,\n    browsers:  [&#39;PhantomJS&#39;],\n    plugins: [\n      &#39;karma-phantomjs-launcher&#39;,\n      &#39;karma-jasmine&#39;,\n      &#39;karma-webpack&#39;\n    ],\n{% endhighlight %}\n\n\n### But if it is a headless browser running in a console how do debug it?\n\nPhantomjs is a headless browser that runs in your console which, is great when your tests are all passing.</code></pre></div>\n<p>PhantomJS 1.9.8 (Mac OS X 0.0.0): Executed 18 of 18 SUCCESS (0.169 secs / 0.165 secs)\n{% endhighlight %}</p>\n<p>But if your output looks like below then you probably wish you could open the testing browsers Developer Tools\nand debug the test manually.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PhantomJS 1.9.8 (Mac OS X 0.0.0): Executed 18 of 18 (1 FAILED) (0.163 secs / 0.161 secs)\nPhantomJS 1.9.8 (Mac OS X 0.0.0) dropboxController should import the file, refresh and autosave the document FAILED\n        Expected spy $emit to have been called with [ &#39;autosave&#39; ] but it was never called.\n        Expected spy $emit to have been called with [ &#39;document.refresh&#39; ] but it was never called.\n{% endhighlight %}\n\n### You can with karma\n\nEven though, using karma as your test runner and phantomjs as the headless browser, you can still step through your \ncode in another browsers Developer Tools.\n\nIn your karma config you specify the port that karma&#39;s webserver will be listening on.</code></pre></div>\n<p>port:      9876,\n{% endhighlight %}</p>\n<p>You can combine your local host address, the port number and the karma debug page in your browser of choice and then step through the code.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://127.0.0.1:9876/debug.html\n{% endhighlight %}\n\n![alt text ](/images/karma-debug.png &quot;Debugging a karam test&quot;)\n\nIf you want to start debugging at a particular point you can add a debugger statement to your tests to break at that line.</code></pre></div>\n<p>debugger;\n{% endhighlight %}</p>","frontmatter":{"title":"How to debug phantomjs tests in another browser","date":null}}},"pageContext":{"slug":"/2015-8-4-debugging-phantomjs-tests-in-a-browser/2015-8-4-debugging-phantomjs-tests-in-a-browser/","previous":{"fields":{"slug":"/2015-9-22-ternary-operators-in-angular-templates/2015-9-22-ternary-operators-in-angular-templates/"},"frontmatter":{"title":"Ternary Operators in Angular Templates"}},"next":{"fields":{"slug":"/2015-7-3-my-top-ten-coding-podcasts/2015-7-3-my-top-ten-coding-podcasts/"},"frontmatter":{"title":"My Top Ten Coding Podcasts"}}}}