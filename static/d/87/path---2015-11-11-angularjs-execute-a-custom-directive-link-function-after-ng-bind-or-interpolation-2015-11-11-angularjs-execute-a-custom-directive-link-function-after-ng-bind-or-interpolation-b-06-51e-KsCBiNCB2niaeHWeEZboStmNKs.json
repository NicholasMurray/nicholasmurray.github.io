{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"ba3be6c7-2f7b-5df5-9340-21a819d34be1","excerpt":"When creating your own custom angularjs directives you may wish to append a value to a variable that is being evaluated within the \nelement that you are…","html":"<p><img src=\"/images/tworonnies.jpg\" alt=\"alt text \" title=\"AngularJS how to execute a custom directive link or compile function after ngBind or interpolation\"></p>\n<p>When creating your own custom angularjs directives you may wish to append a value to a variable that is being evaluated within the\nelement that you are attaching your directive to. </p>\n<p>If you are using a <a href=\"https://docs.angularjs.org/guide/directive\">link</a> function to manipulate a vm variable</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(function() {\n  angular.module(&quot;app&quot;, []); \n})();\n\n(function() {\n  angular.module(&quot;app&quot;).controller(&quot;AppCtrl&quot;, [AppCtrl]);\n    function AppCtrl() {  \n      var vm = this; \n      vm.farewell = &quot;And it&#39;s Goodnight &quot;;\n      return vm;\n    }; \n})();\n\n(function() {\n  angular.module(&quot;app&quot;).directive(&quot;regularFarewellDirective&quot;, function() {\n    return {\n      link: function(scope,element,attrs) {\n          var currentValue = element.text();\n          element.text(currentValue + &quot; and goodbye!&quot;);\n      }\n     };  \n  });\n})();\n{% endhighlight %}</code></pre></div>\n<body ng-app=\"app\">\n  <div ng-controller=\"AppCtrl as vm\">\n    <span regular-farewell-directive>{{vm.farewell}}</span>\n  </div>\n</body>\n<p>{% endhighlight %}</p>\n<p>The output would look like this as the value has not yet been evaluated.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{{vm.farewell}} and goodbye! \n{% endhighlight %}\n\nIf you used a [compile](https://docs.angularjs.org/api/ng/service/$compile) function instead</code></pre></div>\n<p>(function() {\nangular.module(“app”).directive(“regularFarewellDirective”, function() {\nreturn {\ncompile: function(scope,element,attrs) {\nvar currentValue = element.text();\nelement.text(currentValue + ” and goodbye!”);\n}\n};<br>\n});\n})();\n{% endhighlight %}</p>\n<p>The output would be different containing just the evaluated variable value.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">And it&#39;s Goodnight \n{% endhighlight %}\n\n\n\n\n## Executing a custom directive link function where there is a value to be evaluated in ngBind\n\nOne way around this issue would be to move the variable to the built in [ngBind](https://docs.angularjs.org/api/ng/directive/ngBind) directive and then watch for the value\nto be evaluated and then executing our code.</code></pre></div>\n<p>(function() {\nangular.module(“app”).directive(“corbettFarewellDirective”, function() {\nreturn {\nlink: function(scope,element,attrs) {\nscope.$watch(attrs.ngBind, function(newvalue) {\nelement.text(newvalue + ” from me!”);\n});<br>\n}\n};<br>\n});\n})();\n{% endhighlight %}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;body ng-app=&quot;app&quot;&gt; \n  &lt;div ng-controller=&quot;AppCtrl as vm&quot;&gt;\n    &lt;span corbett-farewell-directive ng-bind=&quot;vm.farewell&quot;&gt;&lt;/span&gt;\n  &lt;/div&gt;  \n&lt;/body&gt;\n{% endhighlight %}\n\nThis would result in the desired outcome.</code></pre></div>\n<p>And it’s Goodnight from me!\n{% endhighlight %}</p>\n<h2>Executing a custom directive link function where there is a value to be evaluated in ngBind</h2>\n<p>If we are not able to or, do not wish to, move the variable to an ngBind element attribute we can still watch the\nvariable being evaluated using a combination of a compile function and the <a href=\"https://docs.angularjs.org/api/ng/service/$interpolate\">$interpolate</a> service.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">(function() {\n  angular.module(&quot;app&quot;).directive(&quot;barkerFarewellDirective&quot;,   function($interpolate) {\n      return {\n        compile: function (tElem, tAttrs) {\n          var interpolateFn = $interpolate(tElem.html(), true);\n          tElem.empty();\n          return function(scope, elem, attrs){\n            scope.$watch(interpolateFn, function (value) {\n              var currentText = value;\n              elem.text(currentText + &quot; from him!&quot;);\n            });\n          }\n        }\n      };\n   }) \n})();\n\n{% endhighlight %}</code></pre></div>\n<body ng-app=\"app\"> \n  <div ng-controller=\"AppCtrl as vm\">\n    <span barker-farewell-directive>{{vm.farewell}}</span>\n  </div>  \n</body>\n{% endhighlight %}\n<p>Gaining the ouput that we require.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">And it&#39;s Goodnight from him!\n{% endhighlight %}</code></pre></div>","frontmatter":{"title":"AngularJS how to execute a custom directive link or compile function after ngBind or interpolation","date":null}}},"pageContext":{"slug":"/2015-11-11-angularjs-execute-a-custom-directive-link-function-after-ngBind-or-interpolation/2015-11-11-angularjs-execute-a-custom-directive-link-function-after-ngBind-or-interpolation/","previous":{"fields":{"slug":"/2015-12-2-git-add/2015-12-2-git-add/"},"frontmatter":{"title":"What exactly does git add -A do?"}},"next":{"fields":{"slug":"/2015-10-2-debugging-angularjs-$scope-in-a-browser-console/2015-10-2-debugging-angularjs-$scope-in-a-browser-console/"},"frontmatter":{"title":"How to debug AngularJS $scope in a browser console"}}}}